(function(e){function t(t){for(var i,l,r=t[0],n=t[1],c=t[2],u=0,m=[];u<r.length;u++)l=r[u],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&m.push(a[l][0]),a[l]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],i=!0,r=1;r<s.length;r++){var n=s[r];0!==a[n]&&(i=!1)}i&&(o.splice(t--,1),e=l(l.s=s[0]))}return e}var i={},a={app:0},o=[];function l(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=e,l.c=i,l.d=function(e,t,s){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(s,i,function(t){return e[t]}.bind(null,i));return s},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],n=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=n;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"13ca":function(e,t,s){},"162b":function(e,t,s){e.exports=s.p+"img/moon.9fae7645.svg"},1975:function(e,t,s){},"3c17":function(e,t,s){"use strict";s("13ca")},"3f14":function(e,t,s){},4393:function(e,t,s){},4678:function(e,t,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=o(e);return s(t)}function o(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="4678"},4921:function(e,t,s){"use strict";s("4393")},"56d7":function(e,t,s){"use strict";s.r(t);s("14d9");var i=s("2b0e"),a=s("bc3a"),o=s.n(a);let l={};const r=o.a.create(l);r.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),r.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=r,window.axios=r,Object.defineProperties(e.prototype,{axios:{get(){return r}},$axios:{get(){return r}}})},i["default"].use(Plugin);Plugin;var n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},c=[],d=(s("aede"),{name:"App",data(){return{}}}),u=d,m=(s("3c17"),s("2877")),p=Object(m["a"])(u,n,c,!1,null,null,null),h=p.exports,g=s("8c4f"),f=s("5c96"),b=s.n(f),y=s("323e"),v=s.n(y),w=(s("a5d8"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"login_container"},[t("div",{staticClass:"login_box"},[e._m(0),t("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{model:e.loginForm,rules:e.loginFormRules}},[t("el-form-item",{attrs:{prop:"userName"}},[t("el-input",{attrs:{placeholder:"请输入用户名",clearable:"","prefix-icon":"iconfont icon-user"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码","show-password":"","prefix-icon":"iconfont icon-lock"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-form-item",{staticClass:"btns"},[t("el-button",{attrs:{size:"medium",round:!0,type:"primary"},on:{click:e.login}},[e._v("点击登录")]),t("el-button",{attrs:{size:"medium",round:!0,type:"info"},on:{click:e.resetLoginForm}},[e._v("恢复默认")])],1)],1)],1)])}),A=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"title_box"},[t("p",[e._v("Process GPT Login")])])}],x={name:"Login",data(){return{loginForm:{userName:"admin",password:"123456"},loginFormRules:{userName:[{required:!0,message:"请输入用户名称",trigger:"blur"},{min:2,max:20,message:"长度在2到20个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在6到16个字符之间",trigger:"blur"}]}}},methods:{success(e){console.log(e),this.login()},resetLoginForm(){console.log(this.$refs),this.$refs.loginFormRef.resetFields()},login(){this.$refs.loginFormRef.validate(async e=>{if(!e)return;axios.defaults.headers.post["Content-Type"]="application/json";const{data:t}=await axios.post("sysUser/login",JSON.stringify(this.loginForm));if(200!==t.code)return this.$message.error(t.msg);null!==t.data.sysUser.sysRole.children&&null!==t.data.sysUser.sysRole.children[0]?(this.$message.success("登录成功"),window.sessionStorage.setItem("token",t.data.token),window.sessionStorage.setItem("loginUser",JSON.stringify({sysUser:t.data.sysUser,cinemaId:t.data.cinemaId,cinemaName:t.data.cinemaName})),window.sessionStorage.setItem("btnPermission",(t.data.sysUser.sysRole.roleId,"admin")),await this.$router.push("/welcome")):this.$message.error("抱歉，您没有权限登录，请联系管理员获取权限")})}}},k=x,C=(s("4921"),Object(m["a"])(k,w,A,!1,null,"10b9c1cb",null)),I=C.exports,F=function(){var e=this,t=e._self._c;return t("div")},j=[],R={name:"Welcome"},S=R,N=Object(m["a"])(S,F,j,!1,null,"032c074b",null),D=N.exports,_=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"home-container"},[t("el-header",[t("div",{staticClass:"span-container",staticStyle:{padding:"5px"},on:{click:e.toWelcome}},[t("span",[e._v("  ")]),t("img",{attrs:{src:s("cf05"),alt:"",height:"40px",width:"40px"}}),t("span",[e._v("Process GPT System")])]),t("el-button",{attrs:{type:"info"},on:{click:e.logout}},[e._v("EXIT")])],1),t("el-container",[t("el-aside",{attrs:{width:e.isCollapsed?"64px":"250px"}},[t("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v("|||")]),t("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#409EFF","unique-opened":"",collapse:e.isCollapsed,"collapse-transition":!1,router:!0,"default-active":e.$route.path}},e._l(e.menuList,(function(s){return t("el-submenu",{key:s.id,attrs:{index:String(s.id)}},[t("template",{slot:"title"},[t("i",{class:e.iconList[s.id]}),t("span",[e._v(e._s(s.id)+"   "+e._s(s.name))])]),e._l(s.children,(function(s){return t("el-menu-item",{key:s.id,attrs:{index:"/"+s.path}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-menu"}),t("span",[e._v(e._s(s.id)+"   "+e._s(s.name))])])],2)}))],2)})),1)],1),t("el-main",[t("router-view")],1)],1)],1)},$=[],L={name:"Home",data(){return{menuList:[],iconList:{1:"el-icon-s-home",2:"el-icon-video-camera-solid",3:"el-icon-s-help",4:"el-icon-message-solid",5:"el-icon-s-custom",6:"el-icon-user-solid",7:"el-icon-warning",8:"el-icon-edit"},isCollapsed:!1}},created(){this.getMenuList()},methods:{logout(){window.sessionStorage.clear(),this.$router.push("/login")},async getMenuList(){const e=JSON.parse(window.sessionStorage.getItem("loginUser"));this.menuList=e.sysUser.sysRole.children,this.$router.push("/user")},toggleCollapse(){this.isCollapsed=!this.isCollapsed},toWelcome(){this.$router.push("/welcome")}}},z=L,q=(s("e21d"),Object(m["a"])(z,_,$,!1,null,"1e0560b0",null)),E=q.exports,O=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"board"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("用户管理")]),t("el-breadcrumb-item",[e._v("用户信息管理")])],1)],1),t("el-card",{staticClass:"box-card"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:4}},[t("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.inputUserName,callback:function(t){e.inputUserName=t},expression:"inputUserName"}})],1),t("el-col",{attrs:{span:4}},[t("el-input",{attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:e.inputEmail,callback:function(t){e.inputEmail=t},expression:"inputEmail"}})],1),t("el-col",{attrs:{span:4}},[t("el-input",{attrs:{placeholder:"请输入手机号",clearable:""},model:{value:e.inputPhoneNumber,callback:function(t){e.inputPhoneNumber=t},expression:"inputPhoneNumber"}})],1),t("el-col",{attrs:{span:4}},[t("el-select",{attrs:{placeholder:"请选择性别",clearable:""},model:{value:e.selectedSex,callback:function(t){e.selectedSex=t},expression:"selectedSex"}},e._l(e.gender,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.getUserList}},[e._v("搜索")])],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("添加用户")])],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"danger"},on:{click:e.multipleDelete}},[e._v("批量删除")])],1)],1),t("el-table",{staticStyle:{width:"80%"},attrs:{data:e.userList,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"40"}}),t("el-table-column",{attrs:{type:"index",label:"#"}}),t("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"120px"}}),t("el-table-column",{attrs:{prop:"email",label:"电子邮箱"}}),t("el-table-column",{attrs:{prop:"phoneNumber",label:"手机号码"}}),t("el-table-column",{attrs:{prop:"sex",label:"性别",formatter:e.sexFormat,width:"100px"}}),t("el-table-column",{attrs:{prop:"sysRole.roleName",label:"角色",width:"120px"}}),t("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{attrs:{effect:"dark",content:"修改用户信息",placement:"top",enterable:!1,"open-delay":500}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.showEditDialog(s.row.userId)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"删除用户",placement:"top",enterable:!1,"open-delay":500}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.deleteUserById(s.row.userId)}}})],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,7,9],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"60%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[t("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[t("el-input",{model:{value:e.addForm.userName,callback:function(t){e.$set(e.addForm,"userName",t)},expression:"addForm.userName"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password","show-password":""},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),t("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[t("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),t("el-form-item",{attrs:{label:"手机号码",prop:"phoneNumber"}},[t("el-input",{model:{value:e.addForm.phoneNumber,callback:function(t){e.$set(e.addForm,"phoneNumber",t)},expression:"addForm.phoneNumber"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-select",{attrs:{placeholder:"请选择性别",clearable:""},model:{value:e.addForm.sex,callback:function(t){e.$set(e.addForm,"sex",t)},expression:"addForm.sex"}},e._l(e.gender,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"权限",prop:"roleId"}},[t("el-select",{attrs:{placeholder:"请选择权限",clearable:""},model:{value:e.addForm.roleId,callback:function(t){e.$set(e.addForm,"roleId",t)},expression:"addForm.roleId"}},e._l(e.roleList,(function(e){return t("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),t("el-form-item",{attrs:{label:"头像"}},[t("el-upload",{ref:"pictureRef",attrs:{action:"","list-type":"picture-card","auto-upload":!1,limit:1,"file-list":e.pics,"on-change":e.handleChange,"on-success":e.handleSuccess,"on-error":e.handleError,"on-exceed":e.handleExceed,"http-request":e.submitFile},scopedSlots:e._u([{key:"file",fn:function({file:s}){return t("div",{},[t("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:s.url,alt:""}}),t("span",{staticClass:"el-upload-list__item-actions"},[t("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(s)}}},[t("i",{staticClass:"el-icon-zoom-in"})]),t("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(s)}}},[t("i",{staticClass:"el-icon-delete"})])])])}}])},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),t("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改用户信息",visible:e.editDialogVisible,width:"60%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[t("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[t("el-input",{model:{value:e.editForm.userName,callback:function(t){e.$set(e.editForm,"userName",t)},expression:"editForm.userName"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password","show-password":""},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1),t("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[t("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),t("el-form-item",{attrs:{label:"手机号码",prop:"phoneNumber"}},[t("el-input",{model:{value:e.editForm.phoneNumber,callback:function(t){e.$set(e.editForm,"phoneNumber",t)},expression:"editForm.phoneNumber"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-select",{attrs:{placeholder:"请选择性别",clearable:""},model:{value:e.editForm.sex,callback:function(t){e.$set(e.editForm,"sex",t)},expression:"editForm.sex"}},e._l(e.gender,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"权限",prop:"roleId"}},[t("el-select",{attrs:{placeholder:"请选择权限",clearable:""},model:{value:e.editForm.roleId,callback:function(t){e.$set(e.editForm,"roleId",t)},expression:"editForm.roleId"}},e._l(e.roleList,(function(e){return t("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),t("el-form-item",{attrs:{label:"头像"}},[t("el-upload",{ref:"pictureEditRef",attrs:{action:"","list-type":"picture-card","auto-upload":!1,limit:1,"file-list":e.pics,"on-change":e.handleChange,"on-success":e.handleSuccess,"on-error":e.handleError,"on-exceed":e.handleExceed,"http-request":e.submitFile},scopedSlots:e._u([{key:"file",fn:function({file:s}){return t("div",{},[t("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:s.url,alt:""}}),t("span",{staticClass:"el-upload-list__item-actions"},[t("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(s)}}},[t("i",{staticClass:"el-icon-zoom-in"})]),t("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(s)}}},[t("i",{staticClass:"el-icon-delete"})])])])}}])},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),t("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelEdit}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.editUserInfo}},[e._v("确 定")])],1)],1)],1)},B=[],V=(s("d9e2"),{data(){let e=(e,t,s)=>{const i=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;if(i.test(t))return s();s(new Error("请输入合法的邮箱"))},t=(e,t,s)=>{const i=/^(0|86|17951)?(13[0-9]|15[0123456789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;if(i.test(t))return s();s(new Error("请输入合法的手机号码"))};return{queryInfo:{userName:"",phoneNumber:"",email:"",sex:"",pageNum:1,pageSize:7},total:0,addDialogVisible:!1,addForm:{userId:"",userName:"",password:"",email:"",phoneNumber:"",sex:"",userPicture:""},addFormRules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],phoneNumber:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:t,trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}]},editDialogVisible:!1,editForm:{},editFormRules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],phoneNumber:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:t,trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}]},inputUserName:"",inputEmail:"",inputPhoneNumber:"",selectedSex:"",userList:[],gender:[{id:!1,name:"女"},{id:!0,name:"男"}],multipleSelection:[],dialogImageUrl:"",dialogVisible:!1,pics:[],pictureList:[],picNums:0,deletePicList:[],roleList:[]}},created(){this.getUserList(),this.getRoleList()},methods:{getUserList(){this.queryInfo.userName=this.inputUserName,this.queryInfo.email=this.inputEmail,this.queryInfo.phoneNumber=this.inputPhoneNumber,this.queryInfo.sex=this.selectedSex;const e=this;axios.get("sysUser",{params:e.queryInfo}).then(t=>{console.log(t),e.userList=t.data.data,e.total=t.data.total,e.queryInfo.pageSize=t.data.pageSize,e.queryInfo.pageNum=t.data.pageNum})},getRoleList(){const e=this;axios.get("sysRole").then(t=>{e.roleList=t.data.data})},handleSizeChange(e){this.queryInfo.pageSize=e,this.getUserList(),console.log(e)},handleCurrentChange(e){this.queryInfo.pageNum=e,this.getUserList(),console.log(e)},showAddDialog(){this.addDialogVisible=!0},addDialogClosed(){this.$refs.addFormRef.resetFields(),this.$refs.pictureRef.clearFiles(),this.pics=[],this.pictureList=[]},async addUser(){await this.submitFile(),console.log(this.pictureList),this.addForm.userPicture=JSON.stringify(this.pictureList);let e=!0;const t=this;this.$refs.addFormRef.validate(async s=>{console.log(s),s&&(axios.defaults.headers.post["Content-Type"]="application/json",await axios.post("sysUser",JSON.stringify(t.addForm)).then(t=>{console.log(t),200!==t.data.code&&(this.$message.error("添加用户失败！"),e=!1)}),this.getUserList(),e&&(this.addDialogVisible=!1,this.$message.success("添加用户成功！")))})},async showEditDialog(e){const t=this;await axios.get("sysUser/"+e).then(e=>{t.editForm=e.data.data});for(const s of JSON.parse(this.editForm.userPicture)){let e={name:""};e["url"]=this.global.base+s,this.pics.push(e)}this.editDialogVisible=!0},editDialogClosed(){this.$refs.editFormRef.resetFields(),this.$refs.pictureEditRef.clearFiles(),this.pics=[],this.pictureList=[]},cancelEdit(){this.editDialogVisible=!1,this.deletePicList.splice(0,this.deletePicList.length)},async editUserInfo(){await this.submitFile(),this.editForm.userPicture=JSON.stringify(this.pictureList),this.$refs.editFormRef.validate(async e=>{const t=this;if(!e)return;let s=!0;if(axios.defaults.headers.put["Content-Type"]="application/json",await axios.put("sysUser",JSON.stringify(t.editForm)).then(e=>{200!==e.data.code&&(this.$message.error("修改用户信息失败！"),s=!1)}),s){this.editDialogVisible=!1,this.getUserList(),this.$message.success("修改用户信息成功！");for(let e of this.deletePicList)await axios.get("/upload/delete?filePath="+e.substring(e.indexOf("/images")))}})},handleSelectionChange(e){this.multipleSelection=e},async multipleDelete(){const e=this,t=await this.$confirm("此操作将永久删除这些条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e);if("cancel"===t)return e.$message.info("已取消删除");let s=[];this.multipleSelection.forEach(e=>{s.push(e.userId)}),console.log(s),await axios.delete("sysUser/"+s).then(e=>{200!==e.data.code&&this.$message.success("批量删除用户失败！")}),this.getUserList(),this.$message.success("批量删除用户成功！")},async deleteUserById(e){const t=this,s=await this.$confirm("此操作将永久删除该条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e);if(console.log(s),"cancel"===s)return t.$message.info("已取消删除");await axios.delete("sysUser/"+e).then(e=>{200!==e.data.code&&t.$message.success("删除用户失败！")}),this.getUserList(),this.$message.success("删除用户成功！")},handleRemove(e){const t=e.url;console.log(t);const s=this.pics.findIndex(e=>e.url===t);"success"===e.status&&this.deletePicList.push(e.url),this.pics.splice(s,1)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleChange(e,t){this.pics=t.slice(0)},handleSuccess(e){this.pictureList.push(e.data),this.addForm=JSON.stringify(this.pictureList),this.editForm=JSON.stringify(this.pictureList)},handleError(e){console.log(e)},handleExceed(){this.$message.error("用户头像最多上传一张！")},async submitFile(){const e=this;for(let t=0;t<this.pics.length;t++){let s=new FormData;if("success"===this.pics[t].status){let e=this.pics[t].url;this.pictureList.push(e.substring(e.indexOf("/images")));continue}let i=this.pics[t].raw;s.append("file",i),await axios.post("upload/user",s).then(t=>{e.pictureList.push(t.data.data)})}},sexFormat(e){return!0===e.sex?"男":"女"}}}),T=V,P=(s("663f"),Object(m["a"])(T,O,B,!1,null,"3b4c74a5",null)),U=P.exports,K=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"board"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("权限管理")]),t("el-breadcrumb-item",[e._v("角色信息管理")])],1)],1),t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:2.5}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加角色")])],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"danger"},on:{click:e.isAbleMultipleDelete}},[e._v("批量删除")])],1)],1),t("el-table",{attrs:{data:e.roleList,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"roleId",label:"角色编号",width:"145"}}),t("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180"}}),t("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述",width:"180"}}),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{attrs:{effect:"dark",content:"修改角色信息",placement:"top",enterable:!1,"open-delay":500}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.showEditDialog(s.row.roleId)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"删除角色",placement:"top",enterable:!1,"open-delay":500}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.isAbleDelete(s.row.roleId)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"分配权限",placement:"top",enterable:!1,"open-delay":500}},[t("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(t){return e.showSetRightDialog(s.row)}}})],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,7,9],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"添加角色",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[t("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[t("el-input",{model:{value:e.addForm.roleName,callback:function(t){e.$set(e.addForm,"roleName",t)},expression:"addForm.roleName"}})],1),t("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[t("el-input",{model:{value:e.addForm.roleDesc,callback:function(t){e.$set(e.addForm,"roleDesc",t)},expression:"addForm.roleDesc"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改角色",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[t("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"角色编号",prop:"roleId"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editForm.roleId,callback:function(t){e.$set(e.editForm,"roleId",t)},expression:"editForm.roleId"}})],1),t("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[t("el-input",{model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}})],1),t("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[t("el-input",{model:{value:e.editForm.roleDesc,callback:function(t){e.$set(e.editForm,"roleDesc",t)},expression:"editForm.roleDesc"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.editRole}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"提示",visible:e.setRightDialogVisible,width:"50%"},on:{"update:visible":function(t){e.setRightDialogVisible=t},close:e.setRightDialogClosed}},[t("el-tree",{ref:"treeRef",attrs:{data:e.resourceList,props:e.treeProps,"node-key":"id","default-checked-keys":e.defKeys,"show-checkbox":"","default-expand-all":""}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.setRightDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitRights}},[e._v("确 定")])],1)],1)],1)},M=[],Q=(s("c1df"),{name:"RoleInfo",data(){return{queryInfo:{query:"",pageNum:1,pageSize:7},roleList:[],resourceList:[],treeProps:{children:"children",label:"name"},defKeys:[],total:0,addDialogVisible:!1,addForm:{roleName:"",roleDesc:""},addFormRules:{roleName:[{required:!0,message:"请输入角色名",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},editDialogVisible:!1,editForm:{roleId:null,roleName:"",roleDesc:""},checkAbleId:{},editFormRules:{roleName:[{required:!0,message:"请输入角色名",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},multipleSelection:[],setRightDialogVisible:!1,roleId:""}},created(){this.getRoleList()},methods:{async getRoleList(){const{data:e}=await axios.get("sysRole",{params:this.queryInfo});this.roleList=e.data,this.total=e.total,this.queryInfo.pageNum=e.pageNum,this.queryInfo.pageSize=e.pageSize},handleSizeChange(e){this.queryInfo.pageSize=e,this.getRoleList()},handleCurrentChange(e){this.queryInfo.pageNum=e,this.getRoleList()},addDialogClosed(){this.$refs.addFormRef.resetFields()},addRole(){const e=this;this.$refs.addFormRef.validate(async t=>{if(!t)return;axios.defaults.headers.post["Content-Type"]="application/json";const{data:s}=await axios.post("sysRole",JSON.stringify(e.addForm));if(200!==s.code)return this.$message.error(s.msg);this.addDialogVisible=!1,await this.getRoleList(),this.$message.success("添加角色信息成功！")})},async showEditDialog(e){const t=this;await axios.get("sysRole/"+e).then(e=>{console.log(e),t.editForm=e.data.data}),this.editDialogVisible=!0},editDialogClosed(){this.$refs.editFormRef.resetFields()},editRole(){this.$refs.editFormRef.validate(async e=>{const t=this;if(!e)return;axios.defaults.headers.put["Content-Type"]="application/json";const{data:s}=await axios.put("sysRole/",JSON.stringify(t.editForm));if(200!==s.code)return this.$message.error(s.msg);this.editDialogVisible=!1,await this.getRoleList(),this.$message.success("修改角色信息成功！")})},handleSelectionChange(e){this.multipleSelection=e},async isAbleMultipleDelete(){let e=!0,t="";for(let s=0;s<this.multipleSelection.length;s++){this.checkAbleId.roleId=this.multipleSelection[s].roleId;const{data:i}=await axios.get("sysUser",{params:this.checkAbleId});0!==i.data.length&&(t+=this.multipleSelection[s].roleId+" ",e=!1)}!1!==e?await this.multipleDelete():this.$alert("抱歉！有用户与当前要删除的角色相关联，不能删除角色信息。\n导致异常的角色编号为: "+t,"批量删除请求异常通知",{confirmButtonText:"我知道了",callback:e=>{this.$router.push("/role")}})},async multipleDelete(){const e=this,t=await this.$confirm("此操作将永久删除这些条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e);if("cancel"===t)return e.$message.info("已取消删除");let s=[];this.multipleSelection.forEach(e=>{s.push(e.roleId)});let i=!0;if(await axios.delete("sysRole/"+s).then(e=>{200!==e.data.code&&(i=!1)}),!i)return this.$message.error("批量删除资源信息失败！");await this.getRoleList(),this.$message.success("批量删除资源信息成功！")},async isAbleDelete(e){this.checkAbleId.roleId=e,await axios.get("sysUser",{params:this.checkAbleId}).then(t=>{console.log(t.data.total);let s=t.data.data;if(0===t.data.total)console.log("空的可改"),this.deleteRoleById(e);else{console.log("删除前判断有相关联的user");let e="";for(let t of s)console.log(t),e+=t.userId+" ";console.log("users is : "+e),this.$alert("抱歉！有用户与当前要删除的角色相关联，不能删除角色信息。\n导致异常的用户编号为: "+e,"删除请求异常通知",{confirmButtonText:"我知道了",callback:e=>{this.$router.push("/role")}})}})},async deleteRoleById(e){const t=this,s=await this.$confirm("此操作将永久删除该条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e);if(console.log(s),"cancel"===s)return t.$message.info("已取消删除");let i=!0;if(await axios.delete("sysRole/"+e).then(e=>{200!==e.data.code&&(i=!1)}),!i)return t.$message.error("删除角色信息失败！");await this.getRoleList(),this.$message.success("删除角色信息成功！")},async showSetRightDialog(e){this.roleId=e.roleId;const{data:t}=await axios.get("sysResource/tree");this.resourceList=t.data,console.log(e),await this.getLeafKeys(e,this.defKeys),console.log("defKeys"+this.defKeys),this.setRightDialogVisible=!0},getLeafKeys(e,t){if(e)return e.children?void e.children.forEach(e=>this.getLeafKeys(e,t)):t.push(e.id)},setRightDialogClosed(){this.defKeys=[]},async submitRights(){const e=[...this.$refs.treeRef.getCheckedKeys(!0)],t=this;axios.defaults.headers.post["Content-Type"]="application/json";const{data:s}=await axios.post("sysRole/"+t.roleId,JSON.stringify(e));if(200!==s.code)return this.$message.error("更新权限失败！");this.$message.success("更新权限成功！"),await this.getRoleList(),this.setRightDialogVisible=!1}}}),J=Q,H=Object(m["a"])(J,K,M,!1,null,"2bdb8693",null),G=H.exports,W=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"board"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("权限管理")]),t("el-breadcrumb-item",[e._v("资源信息管理")])],1)],1),t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:2.5}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加资源")])],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"danger"},on:{click:e.multipleDelete}},[e._v("批量删除")])],1)],1),t("el-table",{attrs:{data:e.resourceList,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"资源编号",width:"145"}}),t("el-table-column",{attrs:{prop:"name",label:"资源名称",width:"180"}}),t("el-table-column",{attrs:{prop:"path",label:"资源路径",width:"180"}}),t("el-table-column",{attrs:{prop:"level",label:"权限等级",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[1===s.row.level?t("el-tag",{attrs:{type:"danger"}},[e._v("一级")]):2===s.row.level?t("el-tag",{attrs:{type:"warning"}},[e._v("二级")]):t("el-tag",[e._v("三级")])]}}])}),t("el-table-column",{attrs:{prop:"parent.name",label:"父资源名称",width:"180"}}),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{attrs:{effect:"dark",content:"修改资源信息",placement:"top",enterable:!1,"open-delay":500}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.showEditDialog(s.row.id)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"删除资源",placement:"top",enterable:!1,"open-delay":500}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.deleteResourceById(s.row.id)}}})],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,7,9],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"添加资源",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[t("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"资源编号",prop:"id"}},[t("el-input",{model:{value:e.addForm.id,callback:function(t){e.$set(e.addForm,"id",t)},expression:"addForm.id"}})],1),t("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[t("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),t("el-form-item",{attrs:{label:"资源路径",prop:"path"}},[t("el-input",{model:{value:e.addForm.path,callback:function(t){e.$set(e.addForm,"path",t)},expression:"addForm.path"}})],1),t("el-form-item",{attrs:{label:"父资源名称",prop:"parentId"}},[t("el-select",{attrs:{placeholder:"请选择父资源",clearable:""},model:{value:e.addForm.parentId,callback:function(t){e.$set(e.addForm,"parentId",t)},expression:"addForm.parentId"}},e._l(e.allResources,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addResource}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改资源",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[t("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"资源编号",prop:"id"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),t("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[t("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),t("el-form-item",{attrs:{label:"资源路径",prop:"path"}},[t("el-input",{model:{value:e.editForm.path,callback:function(t){e.$set(e.editForm,"path",t)},expression:"editForm.path"}})],1),t("el-form-item",{attrs:{label:"父资源名称",prop:"parentId"}},[t("el-select",{attrs:{placeholder:"请选择父资源",clearable:""},model:{value:e.editForm.parentId,callback:function(t){e.$set(e.editForm,"parentId",t)},expression:"editForm.parentId"}},e._l(e.allResources,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.editResource}},[e._v("确 定")])],1)],1)],1)},X=[],Z={name:"ResourceInfo",data(){return{queryInfo:{query:"",pageNum:1,pageSize:7},resourceList:[],allResources:[],total:0,addDialogVisible:!1,addForm:{name:"",path:"",level:0,parentId:null},addFormRules:{name:[{required:!0,message:"请输入资源名",trigger:"blur"}],path:[{required:!0,message:"请输入资源路径",trigger:"blur"}]},editDialogVisible:!1,editForm:{},editFormRules:{name:[{required:!0,message:"请输入资源名",trigger:"blur"}],path:[{required:!0,message:"请输入资源路径",trigger:"blur"}]},multipleSelection:[]}},created(){this.getResourceList(),this.getAllResource()},methods:{async getResourceList(){const{data:e}=await axios.get("sysResource",{params:this.queryInfo});this.resourceList=e.data,this.total=e.total,this.queryInfo.pageNum=e.pageNum,this.queryInfo.pageSize=e.pageSize},async getAllResource(){const{data:e}=await axios.get("sysResource");this.allResources=e.data},handleSizeChange(e){this.queryInfo.pageSize=e,this.getResourceList()},handleCurrentChange(e){this.queryInfo.pageNum=e,this.getResourceList()},addDialogClosed(){this.$refs.addFormRef.resetFields()},addResource(){const e=this;this.$refs.addFormRef.validate(async t=>{if(!t)return;null===e.addForm.parentId&&(e.addForm.parentId=0),axios.defaults.headers.post["Content-Type"]="application/json";const{data:s}=await axios.post("sysResource",JSON.stringify(e.addForm));if(200!==s.code)return this.$message.error(s.msg);this.addDialogVisible=!1,await this.getResourceList(),this.$message.success("添加资源信息成功！")})},async showEditDialog(e){const t=this;await axios.get("sysResource/"+e).then(e=>{console.log(e),t.editForm=e.data.data}),0===this.editForm.parentId&&(this.editForm.parentId=""),this.editDialogVisible=!0},editDialogClosed(){this.$refs.editFormRef.resetFields()},editResource(){this.$refs.editFormRef.validate(async e=>{const t=this;if(!e)return;console.log(this.editForm.parentId),""===this.editForm.parentId&&(this.editForm.parentId=0),console.log(this.editForm.parentId),axios.defaults.headers.put["Content-Type"]="application/json";const{data:s}=await axios.put("sysResource/",JSON.stringify(t.editForm));if(200!==s.code)return this.$message.error(s.msg);this.editDialogVisible=!1,await this.getResourceList(),this.$message.success("修改资源信息成功！")})},handleSelectionChange(e){this.multipleSelection=e},async multipleDelete(){const e=this,t=await this.$confirm("此操作将永久删除这些条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e);if("cancel"===t)return e.$message.info("已取消删除");let s=[];this.multipleSelection.forEach(e=>{s.push(e.id)}),await axios.delete("sysResource/"+s).then(e=>{200!==e.data.code&&this.$message.success("批量删除资源信息失败！")}),await this.getResourceList(),this.$message.success("批量删除资源信息成功！")},async deleteResourceById(e){const t=this,s=await this.$confirm("此操作将永久删除该条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e);if(console.log(s),"cancel"===s)return t.$message.info("已取消删除");await axios.delete("sysResource/"+e).then(e=>{200!==e.data.code&&t.$message.success("删除资源信息失败！")}),await this.getResourceList(),this.$message.success("删除资源信息成功！")}}},Y=Z,ee=Object(m["a"])(Y,W,X,!1,null,"28b9cc58",null),te=ee.exports,se=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-purple"},[t("div",{staticClass:"stars"},[t("div",{staticClass:"central-body"},[t("img",{staticClass:"image-404",attrs:{src:s("a200"),width:"300px"}}),t("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"info",plain:"",round:""},on:{click:e.toWelcome}},[e._v("返回主页")])],1),e._m(0),e._m(1)])])},ie=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"objects"},[t("img",{staticClass:"object_rocket",attrs:{src:s("9469"),width:"40px"}}),t("div",{staticClass:"earth-moon"},[t("img",{staticClass:"object_moon",attrs:{src:s("162b"),width:"80px"}})]),t("div",{staticClass:"box_astronaut"},[t("img",{staticClass:"object_astronaut",attrs:{src:s("b402"),width:"140px"}})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"glowing_stars"},[t("div",{staticClass:"star"}),t("div",{staticClass:"star"}),t("div",{staticClass:"star"}),t("div",{staticClass:"star"}),t("div",{staticClass:"star"})])}],ae={name:"Error404",methods:{toWelcome(){return this.$router.push("/Welcome"),!1}}},oe=ae,le=(s("5ae9"),Object(m["a"])(oe,se,ie,!1,null,"4efadcb6",null)),re=le.exports,ne=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"answer-container"}),t("div",{staticClass:"panel-container"},[t("div",{staticClass:"panel right-panel"},[t("div",{staticClass:"right-content"},[e.isEmpty?t("el-empty"):t("div",{staticClass:"right-data-box"},[t("div",{staticClass:"right-data-box-header"},[t("span",[e._v("该业务流程描述了如下内容：")])]),t("div",{ref:"box",staticClass:"right-data-box-question"},e._l(e.questions,(function(s,i){return t("div",{key:i,staticClass:"text item"},[e._v(" "+e._s(s)+" ")])})),0)]),e.isEmpty?e._e():t("div",{staticClass:"popover"},[t("el-popover",{attrs:{placement:"top-start",width:200,trigger:"hover",content:"Click to Copy"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{attrs:{circle:""},on:{click:e.onCopy}},[t("Edit",{staticStyle:{width:"1em",height:"1em"}})],1)]},proxy:!0}],null,!1,3171122356)})],1)],1)]),t("div",{staticClass:"panel left-panel"},[e._m(0),t("div",{staticClass:"input-container"},[t("el-form",[t("el-form-item",{attrs:{label:"copy and paste the bpmn file content"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"write down the xml"},model:{value:e.form.question,callback:function(t){e.$set(e.form,"question",t)},expression:"form.question"}})],1),t("el-form-item"),t("el-form-item",[t("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"go-button",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("Go ！")]),t("el-button",{on:{click:e.onClear}},[e._v("RESET")])],1)],1)],1),t("img",{staticClass:"image",attrs:{src:"https://xianyue-1319816691.cos.ap-nanjing.myqcloud.com/log1.svg"}})])])])},ce=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-content"},[t("h2",[e._v("Business Process Model GPT")]),t("p",[e._v("supported by SOARING LAB")])])}],de={name:"ProcessDesc",data(){return{form:{question:""},answer:"",questions:[],oldScrollTop:0,scrollFlag:!0,Interval:null,tempString:"",isEmpty:!0,loading:!1,copyValue:""}},methods:{onSubmit(){""!=this.form.question.trim()?(this.loading=!0,this.isEmpty=!1,this.questions=[],this.getResponse()):this.$message({showClose:!0,message:"问题不能为空！",type:"error"})},onClear(){this.form.question=""},onCopy(){this.$copyText(this.copyValue).then(e=>{this.$message({showClose:!0,message:"Copy Success!",type:"success"}),console.log(e)},e=>{this.$message({showClose:!0,message:"Copy Fail",type:"error"}),console.log(e)})},async getResponse(){try{const e=this.promptEngineering(this.form.question);await this.getCompletion(e);this.loading=!1,this.$refs.box.addEventListener("scroll",this.scrolling),this.scrollToBottom()}catch(e){this.$message({showClose:!0,message:e.message,type:"error"})}},async getCompletion(e){const t=this.$store.state.apiKey,s="https://api.openai.com/v1/chat/completions",i={model:this.$store.state.modelName,messages:[{role:"user",content:e}],temperature:.7},a={method:"Post",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+t},body:JSON.stringify(i)},o=await fetch(s,a);if(o.status>=400)throw l.error;const l=await o.json();console.log(l.choices[0].message.content);const r=l.choices[0].message.content;return this.questions.push(r),this.copyValue=r,r},async displayLikeHumanWriting(e){console.log(e),this.copyValue=e;for(let t=0;t<e.length;t++)if("\n"!=e[t]||""==this.tempString){if(this.tempString+=e[t],1==this.tempString.length)this.questions.push(this.tempString);else{let e=this.questions.length;this.questions[e-1]=this.tempString}this.scrollFlag&&this.scrollToBottom(),await this.delay(30)}else this.tempString="";this.$refs.box.removeEventListener("scroll",this.scrolling)},delay(e){return new Promise(t=>{setTimeout(()=>{t()},e)})},promptEngineering(e){let t=`这是一段xml代码，请详细解释业务流程，包括协作者之间的协作关系。下面是代码："${e}"`;return t},scrolling(){let e=this.$refs.box.scrollTop,t=e-this.oldScrollTop;this.oldScrollTop=e,t<0?(console.log("正在向上滚动"),this.scrollFlag=!1):(console.log("正在向下滚动"),this.scrollFlag=!0)},scrollToBottom(){this.$nextTick(()=>{let e=this.$refs.box;e.scrollTop=e.scrollHeight})}}},ue=de,me=(s("cdcd"),Object(m["a"])(ue,ne,ce,!1,null,"512387bd",null)),pe=me.exports,he=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"answer-container"}),t("div",{staticClass:"panel-container"},[t("div",{staticClass:"panel left-panel"},[e._m(0),t("div",{staticClass:"input-container"},[t("el-form",[t("el-form-item",{attrs:{label:"RAW BPMN"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请粘贴BPMN文件"},model:{value:e.form.postValue,callback:function(t){e.$set(e.form,"postValue",t)},expression:"form.postValue"}})],1),t("el-form-item",{attrs:{label:"SPECIFIC ENVIRONMENT"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入需要应对的业务场景"},model:{value:e.form.questionNumber,callback:function(t){e.$set(e.form,"questionNumber",t)},expression:"form.questionNumber"}})],1),t("el-form-item"),t("el-form-item",[t("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"go-button",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("GO！")]),t("el-button",{on:{click:e.onClear}},[e._v("RESET")])],1)],1)],1)]),t("div",{staticClass:"panel right-panel"},[t("div",{staticClass:"right-content"},[e.isEmpty?t("el-empty"):t("div",{staticClass:"right-data-box"},[t("div",{staticClass:"right-data-box-header"},[t("span",[e._v("RETURN FILE CONTENT")])]),t("div",{ref:"box",staticClass:"right-data-box-question"},e._l(e.questions,(function(s,i){return t("div",{key:i,staticClass:"text item"},[e._v(" "+e._s(s)+" ")])})),0)]),e.isEmpty?e._e():t("div",{staticClass:"popover"},[t("el-popover",{attrs:{placement:"top-start",width:200,trigger:"hover",content:"Click to Copy"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{attrs:{circle:""},on:{click:e.onCopy}},[t("Edit",{staticStyle:{width:"1em",height:"1em"}})],1)]},proxy:!0}],null,!1,3171122356)})],1)],1)])])])},ge=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-content"},[t("h2",[e._v("BPMN EDITOR GPT")]),t("p",[e._v("SOARING LAB supported")])])}],fe={name:"ProcessEditor",data(){return{form:{postValue:"",difficulty:"",questionNumber:""},difficultyOptions:[{label:"增加",value:"增加"},{label:"修改",value:"修改"},{label:"删除",value:"删除"}],answer:"",questions:[],oldScrollTop:0,scrollFlag:!0,Interval:null,tempString:"",isEmpty:!0,loading:!1,copyValue:""}},methods:{onSubmit(){""!=this.form.postValue.trim()?(this.loading=!0,this.isEmpty=!1,this.questions=[],this.getResponse()):this.$message({showClose:!0,message:"BPMN Content can not be empty",type:"error"})},onClear(){this.form.postValue="",this.form.difficulty="",this.form.questionNumber=1},onCopy(){this.$copyText(this.copyValue).then(e=>{this.$message({showClose:!0,message:"COPY SUCCESS!",type:"success"}),console.log(e)},e=>{this.$message({showClose:!0,message:"COPY FAIL",type:"error"}),console.log(e)})},async getResponse(){try{const e=this.promptEngineering(this.form.postValue,this.form.difficulty,this.form.questionNumber),t=await this.getCompletion(e);this.loading=!1,this.$refs.box.addEventListener("scroll",this.scrolling),this.scrollToBottom(),this.questions.push(t),this.copyValue=t}catch(e){this.$message({showClose:!0,message:e.message,type:"error"})}},async getCompletion(e){const t=this.$store.state.apiKey,s="https://api.openai.com/v1/chat/completions",i={model:this.$store.state.modelName,messages:[{role:"user",content:e}],temperature:.7},a={method:"Post",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+t},body:JSON.stringify(i)},o=await fetch(s,a);if(o.status>=400)throw l.error;const l=await o.json();console.log(l.choices[0].message.content);const r=l.choices[0].message.content;return r},async displayLikeHumanWriting(e){console.log(e),this.copyValue=e;for(let t=0;t<e.length;t++)if("\n"!=e[t]||""==this.tempString){if(this.tempString+=e[t],1==this.tempString.length)this.questions.push(this.tempString);else{let e=this.questions.length;this.questions[e-1]=this.tempString}this.scrollFlag&&this.scrollToBottom(),await this.delay(30)}else this.tempString="";this.$refs.box.removeEventListener("scroll",this.scrolling)},delay(e){return new Promise(t=>{setTimeout(()=>{t()},e)})},promptEngineering(e,t,s){let i=`\n    当遭遇某种情况时，业务人员需要对BPMN进行修改，假设你是一位front-line业务人员， 当遭遇${s}情况时，请你给出相应的修改(返回BPMN内容)，以下是BPMN文件：${e}\n    `;return i},scrolling(){let e=this.$refs.box.scrollTop,t=e-this.oldScrollTop;this.oldScrollTop=e,t<0?(console.log("正在向上滚动"),this.scrollFlag=!1):(console.log("正在向下滚动"),this.scrollFlag=!0)},scrollToBottom(){this.$nextTick(()=>{let e=this.$refs.box;e.scrollTop=e.scrollHeight})}}},be=fe,ye=(s("e306"),Object(m["a"])(be,he,ge,!1,null,"ed260166",null)),ve=ye.exports,we=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"board"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("API管理")]),t("el-breadcrumb-item",[e._v("API信息管理")])],1)],1),t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:2.5}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加API")])],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"danger"},on:{click:e.isAbleMultipleDelete}},[e._v("批量删除")])],1)],1),t("el-table",{attrs:{data:e.roleList,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"apiId",label:"API编号",width:"145"}}),t("el-table-column",{attrs:{prop:"modelName",label:"模型名称",width:"180"}}),t("el-table-column",{attrs:{prop:"apiKey",label:"API KEY",width:"180"}}),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{attrs:{effect:"dark",content:"修改API信息",placement:"top",enterable:!1,"open-delay":500}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.showEditDialog(s.row.apiId)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"删除API",placement:"top",enterable:!1,"open-delay":500}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.isAbleDelete(s.row.apiId)}}})],1),t("el-tooltip",{attrs:{effect:"dark",content:"选中API",placement:"top",enterable:!1,"open-delay":500}},[t("el-button",{attrs:{type:s.row.apiId===e.apiId?"success":"info",icon:"el-icon-s-opportunity",size:"mini"},on:{click:function(t){return e.getApi(s.row.apiId)}}})],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,7,9],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"添加API",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[t("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"模型名称",prop:"modelName"}},[t("el-input",{model:{value:e.addForm.modelName,callback:function(t){e.$set(e.addForm,"modelName",t)},expression:"addForm.modelName"}})],1),t("el-form-item",{attrs:{label:"API KEY",prop:"apiKey"}},[t("el-input",{model:{value:e.addForm.apiKey,callback:function(t){e.$set(e.addForm,"apiKey",t)},expression:"addForm.apiKey"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改API",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[t("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"API编号",prop:"apiId"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editForm.apiId,callback:function(t){e.$set(e.editForm,"apiId",t)},expression:"editForm.apiId"}})],1),t("el-form-item",{attrs:{label:"模型名称",prop:"modelName"}},[t("el-input",{model:{value:e.editForm.modelName,callback:function(t){e.$set(e.editForm,"modelName",t)},expression:"editForm.modelName"}})],1),t("el-form-item",{attrs:{label:"API KEY",prop:"apiKey"}},[t("el-input",{model:{value:e.editForm.apiKey,callback:function(t){e.$set(e.editForm,"apiKey",t)},expression:"editForm.apiKey"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.editRole}},[e._v("确 定")])],1)],1)],1)},Ae=[],xe={name:"ApiInfo",data(){return{queryInfo:{query:"",pageNum:1,pageSize:7},roleList:[],resourceList:[],treeProps:{children:"children",label:"name"},defKeys:[],total:0,addDialogVisible:!1,addForm:{modelName:"",apiKey:""},addFormRules:{modelName:[{required:!0,message:"请输入模型名称",trigger:"blur"}],apiKey:[{required:!0,message:"请输入API KEY",trigger:"blur"}]},editDialogVisible:!1,editForm:{apiId:null,modelName:"",apiKey:""},checkAbleId:{},editFormRules:{modelName:[{required:!0,message:"请输入模型名称",trigger:"blur"}],apiKey:[{required:!0,message:"请输入API KEY",trigger:"blur"}]},multipleSelection:[],setRightDialogVisible:!1,apiId:0,modelName:"",apiKey:""}},created(){this.getRoleList(),this.getApi(this.$store.state.apiId)},methods:{async getApi(e){this.apiId=e,await axios.get("sysApi/"+e).then(e=>{console.log(e),this.modelName=e.data.data.modelName,this.apiKey=e.data.data.apiKey,this.CommitToStore(this.apiId,this.modelName,this.apiKey)})},CommitToStore(e,t,s){this.$store.commit("setApiId",e),this.$store.commit("setModelName",t),this.$store.commit("setApiKey",s)},async getRoleList(){const{data:e}=await axios.get("sysApi",{params:this.queryInfo});this.roleList=e.data,this.total=e.total,this.queryInfo.pageNum=e.pageNum,this.queryInfo.pageSize=e.pageSize},handleSizeChange(e){this.queryInfo.pageSize=e,this.getRoleList()},handleCurrentChange(e){this.queryInfo.pageNum=e,this.getRoleList()},addDialogClosed(){this.$refs.addFormRef.resetFields()},addRole(){const e=this;this.$refs.addFormRef.validate(async t=>{if(!t)return;axios.defaults.headers.post["Content-Type"]="application/json";const{data:s}=await axios.post("sysApi",JSON.stringify(e.addForm));if(200!==s.code)return this.$message.error(s.msg);this.addDialogVisible=!1,await this.getRoleList(),this.$message.success("添加API信息成功！")})},async showEditDialog(e){const t=this;await axios.get("sysApi/"+e).then(e=>{console.log(e),t.editForm=e.data.data}),this.editDialogVisible=!0},editDialogClosed(){this.$refs.editFormRef.resetFields()},editRole(){this.$refs.editFormRef.validate(async e=>{const t=this;if(!e)return;axios.defaults.headers.put["Content-Type"]="application/json";const{data:s}=await axios.put("sysApi/",JSON.stringify(t.editForm));if(200!==s.code)return this.$message.error(s.msg);this.editDialogVisible=!1,await this.getRoleList(),this.$message.success("修改API信息成功！")})},handleSelectionChange(e){this.multipleSelection=e},async isAbleMultipleDelete(){await this.multipleDelete()},async multipleDelete(){const e=this,t=await this.$confirm("此操作将永久删除这些条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e);if("cancel"===t)return e.$message.info("已取消删除");let s=[];this.multipleSelection.forEach(e=>{s.push(e.apiId)});let i=!0;if(await axios.delete("sysApi/"+s).then(e=>{200!==e.data.code&&(i=!1)}),!i)return this.$message.error("批量删除资源信息失败！");await this.getRoleList(),this.$message.success("批量删除资源信息成功！")},async isAbleDelete(e){await this.deleteRoleById(e)},async deleteRoleById(e){const t=this,s=await this.$confirm("此操作将永久删除该条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e);if(console.log(s),"cancel"===s)return t.$message.info("已取消删除");let i=!0;if(await axios.delete("sysApi/"+e).then(e=>{200!==e.data.code&&(i=!1)}),!i)return t.$message.error("删除API信息失败！");await this.getRoleList(),this.$message.success("删除API信息成功！")}}},ke=xe,Ce=Object(m["a"])(ke,we,Ae,!1,null,"99cc4b7c",null),Ie=Ce.exports;i["default"].use(g["a"]);const Fe=[{path:"/",component:I,redirect:"/login"},{path:"/login",component:I},{path:"/home",component:E,redirect:"/welcome",children:[{path:"/welcome",component:D},{path:"/user",component:U},{path:"/role",component:G},{path:"/resource",component:te},{path:"/apikey",component:Ie},{path:"/describe",component:pe},{path:"/editor",component:ve}]},{path:"/*",component:re}],je=new g["a"]({routes:Fe,mode:"history"});je.beforeEach((e,t,s)=>{if("/login"===e.path||"/404"===e.path)return s();v.a.start();const i=window.sessionStorage.getItem("token");if(!i)return f["Message"].error("抱歉，请先登录"),s("/login");s()}),je.afterEach(()=>{v.a.done()});const Re=g["a"].prototype.push;g["a"].prototype.push=function(e){return Re.call(this,e).catch(e=>e)};var Se=je,Ne=s("2f62");i["default"].use(Ne["a"]);var De=new Ne["a"].Store({state:{apiId:0,modelName:"",apiKey:""},mutations:{setApiId(e,t){e.apiId=t},setModelName(e,t){e.modelName=t},setApiKey(e,t){e.apiKey=t}},actions:{},modules:{}});s("c69f");i["default"].use(b.a);s("d282");i["default"].directive("has",{inserted:function(e,t,s){let a="";a=s.context.$route.meta.btnPermission,i["default"].prototype.$_has(a)||(console.log("not have this permission"),e.remove())}});i["default"].prototype.$_has=function(e){let t=sessionStorage.getItem("btnPermission");if(void 0==t||null==t)return!1;let s=e==t;return!!s};const _e="http://117.62.204.121:8183/";var $e,Le,ze={base:_e},qe=ze,Ee=Object(m["a"])(qe,$e,Le,!1,null,null,null),Oe=Ee.exports,Be=s("4eb5"),Ve=s.n(Be);i["default"].use(Ve.a),i["default"].prototype.global=Oe,axios.defaults.baseURL="http://117.62.204.121:8183/",axios.interceptors.request.use(e=>(e.headers.Token=window.sessionStorage.getItem("token"),e));const Te={401:"用户没有权限，请登录",403:"用户没有权限，请联系管理员",404:"访问的资源不存在",406:"请求的格式不可得",410:"请求的资源被永久删除，且不会再得到的",422:"当创建一个对象时，发生一个验证错误",500:"服务器发生错误，请检查服务器",502:"网关错误",503:"服务不可用，服务器暂时过载或维护",504:"网关超时"};axios.interceptors.response.use(e=>e,e=>{if(e){if(!e.response)return console.log("Error",e.message);const t=e.response.status,s=Te[t]||e.response.statusText;f["Message"].error(s),401===t||403===t?Se.push("/login"):t>=404&&t<422&&Se.push("/404")}return Promise.reject(e)}),i["default"].config.productionTip=!1,new i["default"]({router:Se,store:De,render:e=>e(h)}).$mount("#app")},"5ae9":function(e,t,s){"use strict";s("7bd2")},"663f":function(e,t,s){"use strict";s("3f14")},"7bd2":function(e,t,s){},9469:function(e,t,s){e.exports=s.p+"img/rocket.7461c5ac.svg"},a200:function(e,t,s){e.exports=s.p+"img/404.0472a02f.svg"},aede:function(e,t,s){},b3b3:function(e,t,s){},b402:function(e,t,s){e.exports=s.p+"img/astronaut.6b2c82b9.svg"},c69f:function(e,t,s){},c9be:function(e,t,s){},cdcd:function(e,t,s){"use strict";s("c9be")},cf05:function(e,t){e.exports="data:image/png;base64,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"},d282:function(e,t,s){},e21d:function(e,t,s){"use strict";s("b3b3")},e306:function(e,t,s){"use strict";s("1975")}});
//# sourceMappingURL=app.672659ae.js.map